<!-- Leaflet.js -->
<link rel="stylesheet" href="//unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
<script src="//unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>

<style>
  body {
    padding: 0;
    margin: 0;
  }

  #map {
    width: 100%;
  }

  h1 {
    font-size: <%= @font_size %>;
    position: absolute;
    z-index: 5000;
    top: 0px;
    text-align: center;
    width: 100%;
  }
</style>

<div id="wrapper">
  <h1><%= @title["en"] %></h1>
  <div id="map"></div>
</div>

<script>
  var map = L.map('map').setView([0,0], 13);
  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
  	maxZoom: 18,
  	attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
  		'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
  		'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
  	id: 'mapbox.light'
  }).addTo(map);

  $("#map").height($(window).height()).width($(window).width());
  map.invalidateSize();

  $.getJSON(document.URL, function (json) {
    features = L.geoJSON(json.value)
    features.addTo(map);
    map.fitBounds(features.getBounds())
  })
</script>
